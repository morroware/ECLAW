# MediaMTX configuration for ECLAW â€” Pi Camera
# Copy to /etc/mediamtx.yml on the Pi 5
#
# For USB cameras, use mediamtx-usb.yml instead (or run setup_pi.sh
# which auto-detects the camera type).

logLevel: warn

webrtc:
  # Listen on ALL interfaces so ICE candidates include the LAN IP.
  # nginx proxies /stream/ to this port for WHEP signaling; the actual
  # WebRTC media flows over UDP/TCP on the ports below.
  address: :8889
  localUDPAddress: :8189
  localTCPAddress: :8189
  iceServers:
    - url: stun:stun.l.google.com:19302
    - url: stun:stun1.l.google.com:19302

rtsp:
  address: 127.0.0.1:8554

paths:
  cam:
    source: rpiCamera
    sourceOnDemand: false
    rpiCameraWidth: 1280
    rpiCameraHeight: 720
    rpiCameraFPS: 30
    rpiCameraBitrate: 2000000
    rpiCameraIDRPeriod: 30
    rpiCameraAfMode: continuous
    rpiCameraAfRange: normal
    # Uncomment if mounted upside down:
    # rpiCameraHFlip: true
    # rpiCameraVFlip: true
